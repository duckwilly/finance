{% extends "admin/base.html" %}

{% block title %}Finance Admin Dashboard{% endblock %}

{% block page_title %}Finance Admin Dashboard{% endblock %}

{% block filters %}
<p class="muted">
  Snapshot generated on {{ dashboard.generated_at.strftime('%Y-%m-%d %H:%M UTC') }}
</p>
{% endblock %}

{% block content %}
<section class="summary-grid">
  <article class="summary-card">
    <h2>Customers</h2>
    <span class="value">{{ '{:,}'.format(dashboard.metrics.user_count) }}</span>
  </article>
  <article class="summary-card">
    <h2>Organizations</h2>
    <span class="value">{{ '{:,}'.format(dashboard.metrics.org_count) }}</span>
  </article>
  <article class="summary-card">
    <h2>Accounts</h2>
    <span class="value">{{ '{:,}'.format(dashboard.metrics.account_count) }}</span>
  </article>
  <article class="summary-card">
    <h2>Transactions</h2>
    <span class="value">{{ '{:,}'.format(dashboard.metrics.transaction_count) }}</span>
  </article>
  <article class="summary-card">
    <h2>Total Balance</h2>
    <span class="value">
      {{ '{:,.2f}'.format(dashboard.metrics.total_balance) }}
      <span class="muted">EUR</span>
    </span>
  </article>
</section>

<section>
  <h2>Recently Opened Accounts</h2>
  {% if dashboard.recent_accounts %}
  <table>
    <thead>
      <tr>
        <th scope="col">Account</th>
        <th scope="col">Type</th>
        <th scope="col">Opened</th>
      </tr>
    </thead>
    <tbody>
      {% for account in dashboard.recent_accounts %}
      <tr>
        <td>
          {{ account.name or ('Account #' ~ account.id) }}
        </td>
        <td>{{ account.type|capitalize }}</td>
        <td>{{ account.opened_at.strftime('%Y-%m-%d %H:%M') }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p class="muted">No accounts have been opened yet.</p>
  {% endif %}
</section>
{% endblock %}
