<section id="dashboard-panel" class="details details--ai" data-panel="chatbot">
  <div class="details__panel details__panel--focus">
    <div class="chatbot-visuals" aria-live="polite">
      <div class="chart-container" id="chart-container" style="display: none;">
        <h3 class="chart-title" id="chart-title"></h3>
        <canvas id="chart-canvas"></canvas>
      </div>

      <div class="table-container" id="table-container" style="display: none;">
        <table id="data-table">
          <thead id="table-head"></thead>
          <tbody id="table-body"></tbody>
        </table>
      </div>

      <div id="chat-visualizations" class="chat-visualizations"></div>
    </div>
  </div>
</section>

<script>
(function() {
    const responseData = {
        response: {{ response | tojson }},
        chart_config: {{ chart_config | tojson }},
        chart_title: {{ chart_title | tojson }},
        table_data: {{ table_data | tojson }},
        mode: {{ mode | tojson }},
        visualizations: {{ visualizations | tojson }}
    };

    if (window.handleChatbotResponse) {
        window.handleChatbotResponse(responseData);
    }
})();
</script>
