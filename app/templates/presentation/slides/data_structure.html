<article class="slide" data-slide-fragment>
  <header class="slide__header">
    <p class="eyebrow">Database</p>
    <h2 class="slide__title">Structure of the database</h2>
    <p class="slide__lede">Core ledger tables, reference data, and facts assembled so the simulated bank behaves like the real one.</p>
  </header>
  <div class="slide__content slide__grid">
    <div>
      <h3 class="slide__section-title">Core tables</h3>
      <ul class="slide__bullets">
        <li><code>party</code> with <code>individual_profile</code> / <code>company_profile</code> splits identity from attributes.</li>
        <li><code>account</code> keyed by party + account_type (checking, savings, brokerage, operating) and currency.</li>
        <li><code>journal_entry</code> + <code>journal_line</code> implement double-entry accounting with categories.</li>
        <li><code>instrument</code>, <code>trade</code>, <code>holding</code>, <code>price_quote</code> track portfolios and valuations.</li>
      </ul>
      <div class="slide__callout code-shell" aria-label="DDL core tables">
        <div class="code-block">
          <code>CREATE TABLE party (
  id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  party_type ENUM('INDIVIDUAL','COMPANY') NOT NULL,
  display_name VARCHAR(160) NOT NULL
);

CREATE TABLE account (
  id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  party_id BIGINT UNSIGNED NOT NULL,
  account_type_code VARCHAR(32) NOT NULL,
  currency_code CHAR(3) NOT NULL
);</code>
        </div>
      </div>
    </div>
    <div>
      <h3 class="slide__section-title">Support + reporting</h3>
      <ul class="slide__bullets">
        <li>Reference tables (<code>currency</code>, <code>account_type</code>, <code>txn_channel</code>, <code>category</code>) keep codes consistent.</li>
        <li>Access + roles use <code>account_party_role</code>, <code>employment_contract</code>, and <code>company_access_grant</code> so dashboards know who can see what.</li>
        <li>Views like <code>position_agg</code> and <code>v_account_balance</code> precompute balances for instant charts.</li>
        <li>Facts (<code>cash_flow_fact</code>, <code>payroll_fact</code>, <code>holding_performance_fact</code>) summarize by reporting period.</li>
      </ul>
      <div class="slide__callout">
        <p class="slide__callout-title">Seed alignment</p>
        <p>Every CSV in <code>data/seed/</code> matches these keys—e.g., <code>accounts.csv</code> joins to <code>parties.csv</code> and <code>account_types.csv</code>—so imports never violate foreign keys.</p>
      </div>
    </div>
  </div>
</article>
